<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LOOS: What&#39;s new in PyLOOS</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LOOS
   &#160;<span id="projectnumber">v3.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('new_pyloos.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">What's new in PyLOOS </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>PyLOOS has undergone some substantial changes in LOOS 2.3.0. The top-level module/namespace remains "loos", and it includes everything imported from the core of LOOS. We have added a new "pyloos" module under "loos" that now holds Python-specific code, such as the new trajectories classes.</p>
<p>One of the biggest changes in PyLOOS is the introduction of three new trajectory classes. These classes ultimately wrap loos <a class="el" href="classloos_1_1_trajectory.html" title="Base-class for polymorphic trajectories.">Trajectory</a> objects but provide more python-like interfaces. The first class is loos.pyloos.Trajectory. You can specify a stride and the number of frames to skip from the start of the trajectory. The trajectory object can then be used like a python iterator, </p><div class="fragment"><div class="line">model = <a class="code" href="namespaceloos.html#a780ea25bfcceb8473e0061e8347ec9a5">loos.createSystem</a>(<span class="stringliteral">&#39;foo.pdb&#39;</span>)</div><div class="line">traj = loos.pyloos.Trajectory(<span class="stringliteral">&#39;foo.dcd&#39;</span>, model, skip=50)</div><div class="line"></div><div class="line"><span class="keywordflow">for</span> frame <span class="keywordflow">in</span> traj:</div><div class="line">    <span class="keywordflow">print</span> frame.centroid()</div></div><!-- fragment --><p>You can also use the trajectory like an array, </p><div class="fragment"><div class="line">first_frame = traj[0]</div><div class="line">last_frame = traj[-1]</div></div><!-- fragment --><p>There is often a need to know what frame number a frame corresponds to. If you are using the trajectory as in iterator, then the realIndex() function will return the frame number, </p><div class="fragment"><div class="line"><span class="keywordflow">for</span> frame <span class="keywordflow">in</span> traj:</div><div class="line">    <span class="keywordflow">print</span> traj.realIndex(), frame.centroid()</div></div><!-- fragment --><p>Since you can specify a skip and a stride, an array index does not necessarily give you the real frame number. Instead, use the frameNumber() member function. For example, </p><div class="fragment"><div class="line">frame = traj[0]    <span class="comment"># This is actually frame index 50 in the</span></div><div class="line">                   <span class="comment"># trajectory because of the skip</span></div><div class="line"></div><div class="line"><span class="keywordflow">print</span> traj.frameNumber(0)  <span class="comment"># This prints out 50</span></div></div><!-- fragment --><p>Another thing to be careful of is the linkage between groups through the shared atoms. By default, the frame returned will share atoms with whatever group was used to instantiate the trajectory. If you need to decouple the trajectory from the model, pass a copy to the constructor, </p><div class="fragment"><div class="line">traj = loos.pyloos.Trajectory(<span class="stringliteral">&#39;foo.dcd&#39;</span>, model.copy())</div></div><!-- fragment --><p>The other two trajectory classes, VirtualTrajectory and AlignedVirtualTrajectory let you combine multiple pyloos trajectory objects to make one big "virtual" trajectory. The latter supports the LOOS iterative alignment method and will return the aligned frames. Note that this does require reading in the alignment subset and aligning it at the first access to a frame, so there may be memory and performance penalties. The cached frames are discarded after the alignment however. Also, the AlignedVirtualTrajectory can be used with a single loos.pyloos.Trajectory to align it.</p>
<p>All of these classes have rich support for accessing the underlying components and getting information about what frame is being used, among others. For more information, see the above links, use the search bar, or see the documentation for pyloos under the Namespace tab.</p>
<p>In addition to the new trajectories, pyloos now sports several utility functions related to ensembles: loos.pyloos.averageStructure(), loos.pyloos.extractCoords(), and loos.pyloos.svd(), all of which use the new <a class="el" href="classloos_1_1_trajectory.html" title="Base-class for polymorphic trajectories.">Trajectory</a> classes. We have also added loos.pyloos.subspaceOverlap(), and loos.pyloos.covarianceOverlap().</p>
<p>The iterative alignment functions have also changed. There is now a loos.pyloos.iterativeAlignment() function that will take a loos.pyloos.Trajectory and align it (or a list/vector of <a class="el" href="classloos_1_1_atomic_group.html" title="Class for handling groups of Atoms (pAtoms, actually)">loos::AtomicGroup</a>). The loos-style interface is now available through loos.pyloos.iterativeAlignTrajectory(). You can optionally pass a list of frame indices to use. Both functions now return a Python tuple containing the results.</p>
<p>Finally, <a class="el" href="classloos_1_1_atomic_group.html" title="Class for handling groups of Atoms (pAtoms, actually)">AtomicGroup</a> now has support for NumPy with the <a class="el" href="classloos_1_1_atomic_group.html#a605b30aef2f4da808eb92ec0ae0fe9f2">AtomicGroup::getCoords()</a> and <a class="el" href="classloos_1_1_atomic_group.html#a6f01a0fa6b0ccf7ae7400b2530f85051">AtomicGroup::setCoords()</a> functions, which will return (or set) the coordinates of all atoms in the group. For example, calculating an average set of coordinates can be implemented this way: </p><div class="fragment"><div class="line">avg = numpy.zeros(len(traj.frame), 3)</div><div class="line"><span class="keywordflow">for</span> frame <span class="keywordflow">in</span> traj:</div><div class="line">    coords = frame.getCoords()</div><div class="line">    avg += coords</div><div class="line">avg /= len(traj)</div></div><!-- fragment --> </div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">Lightweight Object-Oriented Structure library (LOOS)</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.15 </li>
  </ul>
</div>
</body>
</html>
