<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LOOS: Frequently Asked Questions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">LOOS<span id="projectnumber">&#160;4.1.0</span>
   </div>
   <div id="projectbrief">The Lightweight Object Oriented Structural analysis library/toolkit</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="index.html">Lightweight Object-Oriented Structure library (LOOS)</a></li>  </ul>
</div>
</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Frequently Asked Questions</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="faq_loos"></a>
LOOS</h1>
<h2><a class="anchor" id="faq_loos_building"></a>
Building LOOS (and building with LOOS)</h2>
<dl>
<dt>SCons is not finding the right compiler/swig/doxygen </dt>
<dd><p class="startdd">For LOOS, SCons will use your shell's $PATH veriable to look for tools. You will need to make sure the missing tool is in your path. Some care may be necessary in the order directories appear in your path to make sure you are finding the intended version of the tool. You can explicitly specify a C++ compiler to use with the CXX variable (either in your environment or from a custom.py file). This will take precedence over your path.</p>
<p class="enddd"></p>
</dd>
<dt>SCons is not finding my installation of Boost. </dt>
<dd><p class="startdd">If you need to point SCons to a non-standard location of Boost, use the BOOST variable on the command-line or within your custom.py file. If you need to override either the include directory or the library directory, use the BOOST_INCLUDE and BOOST_LIBPATH variables respectively.</p>
<p class="enddd"></p>
</dd>
<dt>SCons cannot find a Boost library. </dt>
<dd><p class="startdd">SCons will try to determine the correct naming variant for your Boost install. It will start by looking for "libboost_foo-mt.suff", followed by "libboost_foo.suff" where suff is either "dylib" (MacOS/Darwin), "so" (Linux), and "dll.a" (Cygwin). Failing that, it will look for any file matching "libboost_foo-*-mt.suff" followed by the non-threaded version. Of the list of filenames found, SCons will take the shortest one.</p>
<p class="interdd">If necessary, override the libraries linked to for Boost by setting the BOOST_LIBS variable to a space-separated list of libraries. Note that you will need to include all of the ones required by LOOS, at a minimum, </p><pre class="fragment">BOOST_LIBS="boost_regex boost_program_options boost_system boost_thread"
</pre><p> Note that the libraries will be linked in with the same order they appear in the BOOST_LIBS variable.</p>
<p class="enddd"></p>
</dd>
<dt>I'm getting undefined reference or other link errors that appear to be related to Boost </dt>
<dd><p class="startdd">This can happen if you have multiple versions of Boost installed. SCons may use include files from one version, but link with the libraries from another. Check the path to BOOST and the name of the libraries linked against.</p>
<p class="enddd"></p>
</dd>
<dt>I get a build error that says expected threaded libraries or non-threaded libraries, but some library is the opposite? </dt>
<dd><p class="startdd">This is probably a failure of SCons to figure out the appropriate library name. Use the BOOST_LIBS variable (described above) to manually set the libraries used.</p>
<p class="enddd"></p>
</dd>
<dt>I get an error that says I must have some kind of blas installed </dt>
<dd><p class="startdd">This means that SCons could find neither the versions of blas included with Atlas nor the typical system blas. You will need to make sure one or the other is installed. Double check your ATLAS_LIBPATH. In a worst case, you may need to explicitly list the libraries to use by setting the ATLAS_LIBS variable.</p>
<p class="enddd"></p>
</dd>
<dt>I get an error that says SCons could not figure out how to build </dt>
<dd><p class="startdd">As part of the build, SCons will try to compile and link a test program to see whether ATLAS/LAPACK works and if there are any additional libraries needed. For some reason, this step failed. Double-check your Atlas/lapack installation. You may want to try building a small test program with Atlas, and use that to set ATLAS_LIBS or CCFLAGS appropriately.</p>
<p class="enddd"></p>
</dd>
<dt>How do I compile my own, separate tool with debugging? </dt>
<dd><p class="startdd">If you copied the example SConstruct/SConscript, then change the LOOS_CCFLAGS environment variable before building your tool(s).</p>
<p class="enddd"></p>
</dd>
</dl>
<h2><a class="anchor" id="faq_loos_using_tools"></a>
Using LOOS Tools</h2>
<dl>
<dt>What units does LOOS use for coordinates? </dt>
<dd><p class="startdd">LOOS uses Angstroms as the output unit of distance, even when the input coordinates are in other units (e.g. nanometers for GROMACS files are converted into Angstroms).</p>
<p class="enddd"></p>
</dd>
<dt>How does LOOS write out the connectivity information? </dt>
<dd><p class="startdd">LOOS places the model's connectivity into the CONECT records of the output <a class="el" href="classloos_1_1_p_d_b.html" title="PDB reading/writing class.">PDB</a>. Connectivity is written out for all atoms for which there is connectivity present.</p>
<p class="enddd"></p>
</dd>
<dt>Using LOOS tools with large systems </dt>
<dd><p class="startdd">LOOS should have no problem with large systems, although some care is required when using <a class="el" href="classloos_1_1_p_d_b.html" title="PDB reading/writing class.">PDB</a> files. There are several different approaches to reading and writing <a class="el" href="classloos_1_1_p_d_b.html" title="PDB reading/writing class.">PDB</a> files that contain more than 100,000 atoms or 10,000 residues. LOOS uses the Hybrid-36 scheme for encoding large numbers in the atom serial numbers (atomids) and residue id's (resids). While LOOS can read <a class="el" href="classloos_1_1_p_d_b.html" title="PDB reading/writing class.">PDB</a>'s written in other conventions, it is best to canonicalize them into LOOS's hybrid-36 scheme. One way to do this is to use the renum-pdb tool, </p><div class="fragment"><div class="line"><a class="code hl_namespace" href="namespacerenum.html">renum</a>-pdb bigmodel.pdb all 1 1 &gt;loos_bigmodel.pdb</div>
<div class="ttc" id="anamespacerenum_html"><div class="ttname"><a href="namespacerenum.html">renum</a></div><div class="ttdoc">-by-mol</div></div>
</div><!-- fragment --><p class="interdd">Alternatively, stick with a <a class="el" href="classloos_1_1_p_s_f.html" title="Class for reading a subset of the PSF format.">PSF</a>. If you need coordinates in a model, you can extract the first frame of your trajectory using frame2pdb, </p><div class="fragment"><div class="line">frame2pdb bigmodel.psf bigmodel.dcd 0 &gt;loos_bigmodel.pdb</div>
</div><!-- fragment --><p class="interdd">Alternatively, since <a class="el" href="classloos_1_1_p_s_f.html" title="Class for reading a subset of the PSF format.">PSF</a> files are space delimited, field overflow is not an issue. You can convert a PDB+PSF to a <a class="el" href="classloos_1_1_p_d_b.html" title="PDB reading/writing class.">PDB</a> without renumbering by using the convert2pdb tool, i.e. </p><div class="fragment"><div class="line">convert2pdb --coords bigmodel.pdb bigmodel.psf &gt;loos_bigmodel.pdb</div>
</div><!-- fragment --><p class="enddd"></p>
</dd>
<dt>My <a class="el" href="classloos_1_1_d_c_d.html" title="Class for reading DCD files.">DCD</a> says it has 0 frames (or too many frames) </dt>
<dd><p class="startdd">LOOS relies on the <a class="el" href="classloos_1_1_d_c_d.html" title="Class for reading DCD files.">DCD</a> header to know how may frames are in a trajectory, but sometimes the header may be incorrect. For example, a ptraj conversion my result in a 0 frame count in the header, or if a write to a trajectory was interrupted, the header may list more frames than were actually written. Two tools can be used to check the integrity of a trajectory: trajinfo and dcdinfo. Both tools will scan the trajectory and count the number of frames actually present. The latter will also dump the inctrl block from the <a class="el" href="classloos_1_1_d_c_d.html" title="Class for reading DCD files.">DCD</a> header. If there is a problem with the frame count in the <a class="el" href="classloos_1_1_d_c_d.html" title="Class for reading DCD files.">DCD</a> header, use the fixdcd tool to correct it. </p><div class="fragment"><div class="line">fixdcd simulation.dcd</div>
</div><!-- fragment --><p class="enddd"></p>
</dd>
</dl>
<h2><a class="anchor" id="faq_loos_library"></a>
Using the LOOS Library</h2>
<dl>
<dt>How does LOOS handle connectivity/bonds? </dt>
<dd><p class="startdd">Bonds are represented in LOOS by a list of atom id's that are bound to a given atom. This means that connectivity can be maintained even when the bound atoms are no longer stored. However, it also means that atom id's are assumed to be unique. If you are having trouble with connectivity because of fragmenting groups of atoms, you can use <a class="el" href="classloos_1_1_atomic_group.html#a207734a7387d8aadd0ded48652ca12ea" title="Remove any bonding information present in contained atoms.">AtomicGroup::clearBonds()</a> to remove all connectivity in a group, or <a class="el" href="classloos_1_1_atomic_group.html#ab682d7a74a46a65d920f0e362bc72c5a" title="Attempt to prune connectivity (only retain bonds to atoms within this AtomicGroup)">AtomicGroup::pruneBonds()</a> to remove bonds to any atom not contained in the given group.</p>
<p class="enddd"></p>
</dd>
<dt>How do I make a copy of an <a class="el" href="classloos_1_1_atomic_group.html" title="Class for handling groups of Atoms (pAtoms, actually)">AtomicGroup</a>? Why do changes in one group affect another? </dt>
<dd><p class="startdd">Atoms are typically shared between <a class="el" href="classloos_1_1_atomic_group.html" title="Class for handling groups of Atoms (pAtoms, actually)">AtomicGroup</a>'s in LOOS. For example, select just the alpha-carbons from a model, </p><div class="fragment"><div class="line">AtomicGroup model = <a class="code hl_function" href="namespaceloos.html#acb266964bdaa10942329c7747adce633">createSystem</a>(<span class="stringliteral">&quot;protein.pdb&quot;</span>);</div>
<div class="line">AtomicGroup ca = <a class="code hl_function" href="namespaceloos.html#a01ad12706a6b9884cc8f3a5677a899e3">selectAtoms</a>(model, <span class="stringliteral">&quot;name == &#39;CA&#39;&quot;</span>);</div>
<div class="ttc" id="anamespaceloos_html_a01ad12706a6b9884cc8f3a5677a899e3"><div class="ttname"><a href="namespaceloos.html#a01ad12706a6b9884cc8f3a5677a899e3">loos::selectAtoms</a></div><div class="ttdeci">AtomicGroup selectAtoms(const AtomicGroup &amp;source, const std::string selection)</div><div class="ttdoc">Applies a string-based selection to an atomic group...</div><div class="ttdef"><b>Definition</b> utils.cpp:183</div></div>
<div class="ttc" id="anamespaceloos_html_acb266964bdaa10942329c7747adce633"><div class="ttname"><a href="namespaceloos.html#acb266964bdaa10942329c7747adce633">loos::createSystem</a></div><div class="ttdeci">AtomicGroup createSystem(const std::string &amp;filename)</div><div class="ttdoc">Factory function for reading in structure files.</div><div class="ttdef"><b>Definition</b> sfactories.cpp:117</div></div>
</div><!-- fragment --><p> The atoms in ca will be shared with the corresponding atoms in model. Changes to an atom in one group will result in changes to the other group because the atoms are shared. </p><div class="fragment"><div class="line">ca[0]-&gt;coords(ca[0]-&gt;coords() + translation_vector);</div>
</div><!-- fragment --><p> Will translate the first alpha-carbon in both ca and model. Making a copy of an <a class="el" href="classloos_1_1_atomic_group.html" title="Class for handling groups of Atoms (pAtoms, actually)">AtomicGroup</a>, </p><div class="fragment"><div class="line">AtomicGroup duplicate = model;</div>
<div class="line">AtomicGroup duplicate(model);</div>
</div><!-- fragment --><p> results in the copy sharing the same atoms. Also of note here are the two idioms for making a copy of a group. Both result in what is called a "shallow copy" of model. The atoms are shared, but the lists of atoms in the group are different. For example, </p><div class="fragment"><div class="line">duplicate.remove(ca);</div>
</div><!-- fragment --><p> will remove all alpha-carbons from the list of atoms in duplicate, but they will still be present in model.</p>
<p class="interdd"></p>
<p class="interdd">In order to make a copy of an <a class="el" href="classloos_1_1_atomic_group.html" title="Class for handling groups of Atoms (pAtoms, actually)">AtomicGroup</a> where the atoms are <em>not</em> shared, a "deep copy" must be made. Here, each atom is copied into a new, separate atom, and then stored in the copy of the group. The <a class="el" href="classloos_1_1_atomic_group.html#a0dcd01a7efbe31915470ff25dd337d3f" title="Creates a deep copy of this group.">AtomicGroup::copy()</a> function does this, </p><div class="fragment"><div class="line">AtomicGroup duplicate = ca.copy();</div>
</div><!-- fragment --><p> Now, not only are the lists of atoms distinct, but so are the atoms... </p><div class="fragment"><div class="line">duplicate[0]-&gt;coords(duplicate[0]-&gt;coords() + translation_vector);</div>
</div><!-- fragment --><p> Here, the changes to the first alpha-carbon in duplicate does <em>not</em> change the coordinates of the first alpha-carbon in ca since they are no longer shared.</p>
<p class="enddd"></p>
</dd>
<dt>What's the difference between an atom index and an atom id? </dt>
<dd><p class="startdd">When working with a trajectory, the ordering of the atoms in the corresponding model is important. The ith coordinate in a frame of the trajectory belongs to the ith atom in the model. When a model is read in by LOOS, the associated atoms are assigned an index based on their position within the file/model. In general, this approach should just work and you will not need to worry about atom indices.</p>
<p class="interdd"></p>
<p class="interdd">In contrast, LOOS treats the atom id (atomid) as an atom identifier (metadata) and assumes that atomid's are unique. They are important for connectivity since bonds are stored as a list of atomid's that are connected to a given atom. Also, atomid's can be non-contiguous to indicate logical groupings, for example, nor are they required to begin with 1.</p>
<p class="enddd"></p>
</dd>
<dt>How have atomid's changed in LOOS in release 2.1.0? </dt>
<dd><p class="startdd">Previously, LOOS treated atomid's as special when reading a trajectory. The atomid was the index into the trajectory frame for the corresponding atom. This required models to have contiguous atomid's that began with 1. This is no longer the case. Atomid's should still be unique, otherwise features like searching for atoms and following bonds may give erroneous results.</p>
<p class="interdd"></p>
<p class="interdd">Additionally, some trajectory format classes have special cases of </p><div class="fragment"><div class="line"><a class="code hl_function" href="classloos_1_1_trajectory.html#a2d1304fd897a2b96dc17478a4c6c6e19">Trajectory::updateGroupCoords</a>(AtomicGroup&amp; g)</div>
<div class="ttc" id="aclassloos_1_1_trajectory_html_a2d1304fd897a2b96dc17478a4c6c6e19"><div class="ttname"><a href="classloos_1_1_trajectory.html#a2d1304fd897a2b96dc17478a4c6c6e19">loos::Trajectory::updateGroupCoords</a></div><div class="ttdeci">void updateGroupCoords(AtomicGroup &amp;g)</div><div class="ttdoc">Update the coordinates in an AtomicGroup with the current frame.</div><div class="ttdef"><b>Definition</b> Trajectory.hpp:161</div></div>
</div><!-- fragment --><p> If the number of atoms in g is the same as the trajectory frame, then the coordinates are copied <em>in order</em> into g, irrespective of the atomid's. This is no longer the case. <a class="el" href="classloos_1_1_atom.html" title="Basic Atom class for handling atom properties.">Atom</a> indices will always be honored.</p>
<p class="enddd"></p>
</dd>
<dt>What if I need to renumber the atom indices? </dt>
<dd><p class="startdd">This should rarely happen. If it does, you can set the indices directly by using Atom::index(), or use <a class="el" href="classloos_1_1_atomic_group.html#a6b461aac137353d384db9098e8e2433b" title="Reset the atom indices (used for interfacing with trajectories)">AtomicGroup::resetAtomIndices()</a> which will make all indices in a given group sequential and beginning with 0.</p>
<p class="enddd"></p>
</dd>
</dl>
<hr  />
<hr  />
 <h1><a class="anchor" id="faq_pyloos"></a>
PyLOOS</h1>
<hr  />
<p> <b> NOTE: This FAQ is specific to the Python interface to LOOS (PyLOOS). Please report any bugs found to "loos.maintainer [at] gmail.com". Similarly, please feel free to contact us regarding new functionality or better implementations. </b> </p><hr  />
<h2><a class="anchor" id="faq_pyloos_building"></a>
Building PyLOOS</h2>
<dl>
<dt>What operating systems support PyLOOS? </dt>
<dd><p class="startdd">PyLOOS currently supports Linux and MacOS. For specific versions and installation instructions, see the INSTALL file.</p>
<p class="enddd"></p>
</dd>
<dt>How do I build PyLOOS? </dt>
<dd><p class="startdd">You will need to install a recent version of Swig. For details specific to your OS, please see the INSTALL file.</p>
<p class="enddd"></p>
</dd>
<dt>I'm getting errors from Swig (about missing files) </dt>
<dd><p class="startdd">On a few test systems, we found that there is an older version of swig present (e.g. /usr/bin) in addition to a newer version (e.g. in /sw/bin). Make sure that your shell's path has the newever location first, i.e. /sw/bin appears to the left of /usr/bin</p>
<p class="enddd"></p>
</dd>
<dt>I'm seeing a lot of warnings messages from the PyLOOS build </dt>
<dd><p class="startdd">We have seen this in some instances (MacOS 10.9, for example), and believe they can be safely ignored.</p>
<p class="enddd"></p>
</dd>
<dt>SCons is trying to build PyLOOS even though it's unsupported, or the build is breaking with PyLOOS </dt>
<dd><p class="startdd">You can disable the auto-build of PyLOOS by using the pyloos command-line flag with scons: <code>scons pyloos=0</code></p>
<p class="enddd"></p>
</dd>
<dt>How do I use PyLOOS? </dt>
<dd><p class="startdd">Your environment needs to be setup to allow Python to locate the PyLOOS libraries. LOOS now provides two setup scripts, setup.sh for bash users, and setup.csh for tcsh users. Source the appropriate script, then execute Python and import from loos.</p>
<p class="enddd"></p>
</dd>
<dt>Can I install PyLOOS? </dt>
<dd><p class="startdd">Yes. PyLOOS can be installed alongside the rest of LOOS, </p><div class="fragment"><div class="line">scons install</div>
</div><!-- fragment --><p> or to install in a specific location, </p><div class="fragment"><div class="line">scons PREFIX=/home/user/MyLOOS</div>
</div><!-- fragment --><p> Be sure to source the appropriate setup.sh or setup.csh file in the install directory prior to using LOOS/PyLOOS.</p>
<p class="enddd"></p>
</dd>
<dt>I get an error about a missing init function when I try to import PyLOOS... </dt>
<dd><p class="startdd">If you built LOOS and <em>then</em> built PyLOOS, the old LOOS shared library may still be around and this can confuse Python. Look for <code>loos.so</code> and remove it, or try a clean rebuild, </p><div class="fragment"><div class="line">scons -c</div>
<div class="line">scons</div>
</div><!-- fragment --><p class="enddd"></p>
</dd>
</dl>
<h2><a class="anchor" id="faq_pyloos_using"></a>
Using PyLOOS</h2>
<dl>
<dt>Setting parameters in LOOS objects </dt>
<dd><p class="startdd">In C++, it is possible to have two different methods for setting a parameter value, </p><div class="fragment"><div class="line">GCoord c;</div>
<div class="line">c.x() = 42;</div>
<div class="line">c.x(42);</div>
</div><!-- fragment --><p> In both cases, the X-coordinate is set to 42. In Python, however, you must use the second form, c.x(42) .</p>
<p class="enddd"></p>
</dd>
<dt>Making copies of LOOS objects </dt>
<dd><p class="startdd">Remember that in Python, saying "a = b" does not actually copy b. Python has a "copy" package which supports a shallow copy using the copy() function and a deep copy using the deepcopy() function. A shallow copy is similar to how a LOOS object would normally be copied in C++. For example, </p><div class="fragment"><div class="line">AtomicGroup A;</div>
<div class="line">AtomicGroup B = A;</div>
</div><!-- fragment --> <pre class="fragment">In this case, B is a shallow copy of A.  That is, the atoms
are shared between A and B.  However, B can contain a
different set of atoms from A, e.g.
</pre> <div class="fragment"><div class="line">B.append(another_atom);</div>
</div><!-- fragment --><p> Now B will have an extra atom that A will be lacking, but existing atoms will still be shared between A and B. In contrast, in the PyLOOS equivalent, </p><div class="fragment"><div class="line">A = AtomicGroup()</div>
<div class="line">B = A</div>
<div class="line">B.append(another_atom)</div>
</div><!-- fragment --><p> A and B are the same and now both have the extra atom. To make a copy of A that behaves like the C++ copy, use Python's copy package to make a shallow copy, </p><div class="fragment"><div class="line">    <span class="keyword">import</span> copy</div>
<div class="line">A = AtomicGroup()</div>
<div class="line">B = copy.copy(A)</div>
<div class="line">B.append(another_atom)</div>
</div><!-- fragment --><p> Now, B has an extra atom and existing atoms are shared. Note that the C++ idiom, </p><div class="fragment"><div class="line">A = AtomicGroup()</div>
<div class="line">B = AtomicGroup(A)</div>
</div><!-- fragment --><p> will also work for creating a shallow copy.</p>
<p class="interdd">Since atoms are shared in a shallow copy of an <a class="el" href="classloos_1_1_atomic_group.html" title="Class for handling groups of Atoms (pAtoms, actually)">AtomicGroup</a>, modifying the atom in one group will modify the atom in all groups that contain that atom. </p><div class="fragment"><div class="line">    <span class="keyword">import</span> copy</div>
<div class="line">an_atom = Atom(1, <span class="stringliteral">&quot;CA&quot;</span>, GCoord(1,2,3))</div>
<div class="line">    A = AtomicGroup()</div>
<div class="line">A.append(an_atom)</div>
<div class="line"> </div>
<div class="line">B = copy.copy(A)</div>
<div class="line">B[0].id(42)</div>
</div><!-- fragment --><p> Here, we've created an atom, appended it to <a class="el" href="classloos_1_1_atomic_group.html" title="Class for handling groups of Atoms (pAtoms, actually)">AtomicGroup</a> A, then made a shallow copy into <a class="el" href="classloos_1_1_atomic_group.html" title="Class for handling groups of Atoms (pAtoms, actually)">AtomicGroup</a> B. However, atoms are shared between AtomicGroups that have been shallow-copied. Therefore, when the atomid of the first atom in B is changed, since the atom is shared between A and B, both groups see the change. Sometimes, it is necessary to have a separate copy of a group so that changes to the atom in group B will not affect group A. This requires a deep copy, </p><div class="fragment"><div class="line">    <span class="keyword">import</span> copy</div>
<div class="line">an_atom = Atom(1, <span class="stringliteral">&quot;CA&quot;</span>, GCoord(1,2,3))</div>
<div class="line">A = AtomicGroup()</div>
<div class="line">A.append(an_atom)</div>
<div class="line"> </div>
<div class="line">B = copy.deepcopy(A)</div>
<div class="line">B[0].id(42)</div>
</div><!-- fragment --><p> Here, the atoms are no longer shared...each group has its own copy of the atom. Therefore, changing the atomid of the first atom in group B does NOT change the first atom in group A. This is equivalent to using the <a class="el" href="classloos_1_1_atomic_group.html#a0dcd01a7efbe31915470ff25dd337d3f" title="Creates a deep copy of this group.">AtomicGroup::copy()</a> function in C++.</p>
<p class="enddd"></p>
</dd>
<dt>Why are my GCoords changing on me? </dt>
<dd><p class="startdd">See above... Remember that saying "a = b" in Python does NOT copy the GCoord so when you change a, you're also changing b. Use "a = copy(b)" to get a new GCoord that's a copy of the existing one.</p>
<p class="enddd"></p>
</dd>
<dt>What objects support copying? </dt>
<dd><p class="startdd">Currently, <a class="el" href="classloos_1_1_atom.html" title="Basic Atom class for handling atom properties.">Atom</a>, GCoord, and <a class="el" href="classloos_1_1_atomic_group.html" title="Class for handling groups of Atoms (pAtoms, actually)">AtomicGroup</a> support copying. For <a class="el" href="classloos_1_1_atom.html" title="Basic Atom class for handling atom properties.">Atom</a> and GCoord, copy() and deepcopy() are functionally equivalent.</p>
<p class="enddd"></p>
</dd>
<dt>Where did pAtoms go in PyLOOS? </dt>
<dd><p class="startdd">Swig maps the boost shared pointer (pAtom) into the name "Atom". So, wherever you would use a pAtom in the C++ version of your code, simply use <a class="el" href="classloos_1_1_atom.html" title="Basic Atom class for handling atom properties.">Atom</a> in PyLOOS.</p>
<p class="enddd"></p>
</dd>
<dt>Are there any examples of using PyLOOS? </dt>
<dd><p class="startdd">Yes. Look in the Packages/PyLOOS directory. We will be adding more examples in future releases.</p>
<p class="enddd"></p>
</dd>
<dt>Where are the matrix operations? </dt>
<dd><p class="startdd">We currently assume that matrix operations are better handled by the appropriate Python package (e.g. numpy). Some matrix-based routines are available, such covariance and subspace overlaps.</p>
<p class="enddd"></p>
</dd>
<dt>Why is PyLOOS so slow? </dt>
<dd>A frequent problem with PyLOOS performance is a result of looping using Python. For example, to find an <a class="el" href="classloos_1_1_atom.html" title="Basic Atom class for handling atom properties.">Atom</a> in an <a class="el" href="classloos_1_1_atomic_group.html" title="Class for handling groups of Atoms (pAtoms, actually)">AtomicGroup</a>, the following will be slow, <div class="fragment"><div class="line">found = 0</div>
<div class="line"><span class="keywordflow">for</span> x <span class="keywordflow">in</span> range(system.size()):</div>
<div class="line">    <span class="keywordflow">if</span> (system[x] == an_atom):</div>
<div class="line">       found = 1</div>
<div class="line">       <span class="keywordflow">break</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> (found):</div>
<div class="line">   do_something()</div>
</div><!-- fragment --> <pre class="fragment">Instead of using loops, try first to get Python to do the
looping internally, i.e.
</pre> <div class="fragment"><div class="line"><span class="keywordflow">if</span> (an_atom <span class="keywordflow">in</span> system):</div>
<div class="line">   do_something()</div>
</div><!-- fragment --> <pre class="fragment">Alternatively, look for LOOS functions that will perform the
same operation, such as:
</pre> <div class="fragment"><div class="line"><span class="keywordflow">if</span> (system.contains(an_atom)):</div>
<div class="line">   do_something()</div>
</div><!-- fragment --> <pre class="fragment">Finally, consider rewriting the loop in C++ and adding it to
AtomicGroup (remembering to update the SWIG interface file,
AtomicGroup.i).
</pre> </dd>
</dl>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
